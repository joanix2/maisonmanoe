{% extends "client/base.html" %} {% block title %}Maison Manoé - Décoration d'intérieur artisanale{% endblock %} {% block description %}Maison Manoé - Art de vivre et décoration d'intérieur française.
Pièces authentiques fabriquées à la main par des artisans passionnés.{% endblock %} {% block content %}
<!-- SECTION HERO - Bannière principale avec image de fond -->
<section class="relative h-[80vh] bg-cover bg-center flex items-center justify-center text-white text-center" style="background-image: url('https://picsum.photos/1920/1080')" role="banner">
  <!-- Menu overlay - centré sur mobile, haut gauche sur desktop -->
  <div class="absolute top-8 left-1/2 -translate-x-1/2 md:left-8 md:translate-x-0 z-20">
    <nav class="flex gap-4 md:gap-6" aria-label="Navigation produits">
      <a href="/recherche" class="lowercase font-medium text-white hover:text-maison-beige transition-colors text-base md:text-lg drop-shadow-lg">produits</a>
      <a href="/recherche?filter=nouveautes" class="lowercase font-medium text-white hover:text-maison-beige transition-colors text-base md:text-lg drop-shadow-lg">nouveautés</a>
      <a href="/recherche?filter=promotions" class="lowercase font-medium text-white hover:text-maison-beige transition-colors text-base md:text-lg drop-shadow-lg">promotions</a>
    </nav>
  </div>

  <div class="z-10">
    <h1 class="text-5xl md:text-6xl font-bold mb-4 drop-shadow-lg">Tendance du moment</h1>
    <p class="text-xl md:text-2xl mb-8 drop-shadow-md">Nouvelle collection</p>
    <a href="/recherche" class="inline-block bg-black text-white px-8 py-3 rounded hover:bg-gray-800 transition-colors font-medium">Découvrir</a>
  </div>
  <div class="absolute inset-0 bg-black/30"></div>
</section>

<!-- SECTION DÉCOUVRIR LES NOUVEAUTÉS - Layout avec produit principal et sidebar -->
<section class="py-16 px-4 md:px-8 lg:px-16 bg-white" aria-labelledby="nouveautes">
  <h2 id="nouveautes" class="text-3xl md:text-4xl font-bold text-center mb-12 lowercase text-gray-900">Découvrir les nouveautés</h2>
  <div class="container mx-auto grid grid-cols-1 lg:grid-cols-2 gap-6 max-w-7xl">
    <!-- Produit principal mis en avant - GAUCHE -->
    <a href="#" id="featured-product" class="relative group bg-white block">
      <div class="relative overflow-hidden rounded-sm">
        <img src="https://picsum.photos/600/700" alt="Produit vedette" class="w-full h-[300px] lg:h-[728px] object-cover" />
        <button class="absolute top-4 right-4 p-2 bg-white rounded-full shadow-md hover:bg-gray-100 transition-colors z-10" aria-label="Ajouter aux favoris" onclick="event.preventDefault();">
          <svg class="w-6 h-6 text-gray-700 hover:text-red-500 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"
            />
          </svg>
        </button>
      </div>
      <div class="mt-4">
        <h3 class="text-lg font-semibold text-gray-900 mb-1">Featured product</h3>
        <p class="text-sm text-gray-500 mb-2">Description of featured product</p>
        <p class="text-lg font-bold text-gray-900">€10.99</p>
      </div>
    </a>

    <!-- Produits en sidebar - DROITE -->
    <div class="flex flex-col gap-6">
      <!-- Produit sidebar 1 - HAUT -->
      <a href="#" id="sidebar-product-1" class="bg-white block">
        <div class="relative overflow-hidden rounded-sm">
          <img src="https://picsum.photos/600/240" alt="Produit 1" class="w-full h-[300px] object-cover mb-4" />
          <button class="absolute top-4 right-4 p-2 bg-white rounded-full shadow-md hover:bg-gray-100 transition-colors z-10" aria-label="Ajouter aux favoris" onclick="event.preventDefault();">
            <svg class="w-5 h-5 text-gray-700 hover:text-red-500 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"
              />
            </svg>
          </button>
        </div>
        <div>
          <h4 class="text-lg font-semibold text-gray-900 mb-1">Product</h4>
          <p class="text-sm text-gray-500 mb-2">Description of top product</p>
          <p class="text-lg font-bold text-gray-900">€10.99</p>
        </div>
      </a>

      <!-- Produit sidebar 2 - BAS -->
      <a href="#" id="sidebar-product-2" class="bg-white block">
        <div class="relative overflow-hidden rounded-sm">
          <img src="https://picsum.photos/600/241" alt="Produit 2" class="w-full h-[300px] object-cover mb-4" />
          <button class="absolute top-4 right-4 p-2 bg-white rounded-full shadow-md hover:bg-gray-100 transition-colors z-10" aria-label="Ajouter aux favoris" onclick="event.preventDefault();">
            <svg class="w-5 h-5 text-gray-700 hover:text-red-500 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"
              />
            </svg>
          </button>
        </div>
        <div>
          <h4 class="text-lg font-semibold text-gray-900 mb-1">Product</h4>
          <p class="text-sm text-gray-500 mb-2">Description of lower product</p>
          <p class="text-lg font-bold text-gray-900">€10.99</p>
        </div>
      </a>
    </div>
  </div>
</section>

<!-- SECTION À PROPOS - Présentation de la marque -->
<section class="bg-maison-tan py-20 px-4 md:px-8" aria-labelledby="about">
  <div class="container mx-auto max-w-4xl">
    <div class="flex flex-col gap-8 items-center">
      <div>
        <h2 id="about" class="text-3xl md:text-4xl font-bold mb-6">A propos de maison manoé</h2>
      </div>
      <div class="text-left">
        <p class="text-lg leading-relaxed text-gray-800">
          Maison Manoé est une marque française dédiée à l'art de vivre et à la décoration d'intérieur. Nous sélectionnons des pièces authentiques, fabriquées à la main par des artisans passionnés.
          Chaque création raconte une histoire, mêlant esthétique contemporaine et traditions intemporelles. Notre mission : sublimer votre quotidien avec des objets qui ont une âme.
        </p>
      </div>
    </div>
  </div>
</section>

<!-- Script pour charger les produits dynamiquement -->
<script>
  document.addEventListener("DOMContentLoaded", async function () {
    try {
      // Charger les 3 premiers produits en ligne
      const response = await fetch("/api/products?status=online&limit=3");
      if (response.ok) {
        const products = await response.json();

        // Mettre à jour le produit principal
        if (products.length > 0) {
          updateFeaturedProduct(products[0]);
        }

        // Mettre à jour les produits de la sidebar
        if (products.length > 1) {
          updateSidebarProduct(1, products[1]);
        }
        if (products.length > 2) {
          updateSidebarProduct(2, products[2]);
        }
      }
    } catch (error) {
      console.error("Erreur lors du chargement des produits:", error);
    }
  });

  function updateFeaturedProduct(product) {
    const element = document.getElementById("featured-product");
    if (!element) return;

    element.href = `/produit/${product.id}`;
    const img = element.querySelector("img");
    const title = element.querySelector("h3");
    const description = element.querySelector("p.text-sm");
    const price = element.querySelector("p.text-lg.font-bold");

    if (img && product.main_image) img.src = product.main_image;
    if (title) title.textContent = product.name;
    if (description) description.textContent = product.short_description || product.description.substring(0, 80) + "...";
    if (price) price.textContent = `${parseFloat(product.price).toFixed(2)} €`;
  }

  function updateSidebarProduct(index, product) {
    const element = document.getElementById(`sidebar-product-${index}`);
    if (!element) return;

    element.href = `/produit/${product.id}`;
    const img = element.querySelector("img");
    const title = element.querySelector("h4");
    const description = element.querySelector("p.text-sm");
    const price = element.querySelector("p.text-lg.font-bold");

    if (img && product.main_image) img.src = product.main_image;
    if (title) title.textContent = product.name;
    if (description) description.textContent = product.short_description || product.description.substring(0, 60) + "...";
    if (price) price.textContent = `${parseFloat(product.price).toFixed(2)} €`;
  }
</script>
{% endblock %}
